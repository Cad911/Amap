<% if produits.count == 0 %>
  <p class="l_product_list"> Aucun produit</p>
<% else %>
	<!-- _______________________ first block ________________________________________-->
	<% if produits_first_block.count > 0 %>
		<ul class="l_product_list huge_left">
			 <li class="is_huge">
			      <div class="l_photo_description is_huge is_vertical">
			        <div class="image">
			          <div class="has_corners_shadow is_huge">
			          	<% if !(first_huge_product.stock.default_image).nil? %>
			          		<%= link_to page_produit_show_path(first_huge_product.user_id, first_huge_product) do %>
			          			<%= image_tag (first_huge_product.stock.default_image).image_url(:is_huge) if !(first_huge_product.stock.default_image).nil? %>
			          		<% end %>
			          	<% end %>
			          </div>
			        </div>
			        <div class="content">
			          <p class="title"> <%= link_to first_huge_product.titre, page_produit_show_path(first_huge_product.user_id,first_huge_product), :class => "title" %></p>
			          <p class="description"><%= first_huge_product.description %></p>
			          <span class="price "><%= first_huge_product.prix_unite_ttc %> € <span class="is_italic">les <%= "#{first_huge_product.quantite} #{first_huge_product.stock.unite_mesure.nom}"  %></span></span>
			        </div>
			      </div>
    		</li>
			<% produits_first_block.each do |p| %>
				<li>
			      <div class="l_photo_description is_medium is_vertical">
			        <div class="image">
			          <div class="has_corners_shadow is_medium">
			          	<% if !(p.stock.default_image).nil? %>
			          		<%= link_to page_produit_show_path(p.user_id,p) do %>
			          			<%= image_tag (p.stock.default_image).image_url(:is_medium) if !(p.stock.default_image).nil? %>
			          		<% end %>
			          	<% end %>
			          </div>
			        </div>
			        <div class="content">
			          <p class="title"> <%= link_to p.titre, page_produit_show_path(p.user_id,p), :class => "title" %></p>
			          <p class="description"><%= p.description %></p>
			          <span class="price "><%= p.prix_unite_ttc %>€ <span class="is_italic">les <%= "#{p.quantite} #{p.stock.unite_mesure.nom}"  %></span></span>
			        </div>
			      </div>
			    </li>
			<% end %>
			<br class="clear"/>
		</ul>
	<% end %>

<!-- _______________________ middle block ________________________________________-->
	<% if produit_middle_block.count > 0 %>
		<!-- <ul class="l_product_list" style=" min-height: 310px;"> -->
			<% i = 0 %>
			<% produit_middle_block.each do |p| %>
				<% if i%4 == 0 %>
					<ul class="l_product_list" style=" min-height: 310px;">
				<% end %>
						<li>
					      <div class="l_photo_description is_medium is_vertical">
					        <div class="image">
					          <div class="has_corners_shadow is_medium">
					          	<% if !(p.stock.default_image).nil? %>
					          		<%= link_to page_produit_show_path(p.user_id,p) do %>
					          			<%= image_tag (p.stock.default_image).image_url(:is_medium) if !(p.stock.default_image).nil? %>
					          		<% end %>
					          	<% end %>
					          </div>
					        </div>
					        <div class="content">
					          <p class="title"><%= link_to p.titre, page_produit_show_path(p.user_id,p), :class => "title" %></p>
					          <p class="description"><%= p.description %></p>
					          <span class="price "> <%= p.prix_unite_ttc %>€ <span class="is_italic">les <%= "#{p.quantite} #{p.stock.unite_mesure.nom}"  %></span></span>
					        </div>
					      </div>
					    </li>
			    <% if (i+1)%4 == 0 || i+1 == produit_middle_block.count %>
			    	<br class="clear"/>
			    	</ul>
			    <% end %>
			    <% i += 1 %>
			<% end %>
	<% end %>


<!-- _______________________ last block ________________________________________-->
	<% if produit_last_block.count > 0 %>
		<ul class="l_product_list huge_right">
			<li class="is_huge">
		      <div class="l_photo_description is_huge is_vertical">
		        <div class="image">
		          <div class="has_corners_shadow is_huge">
		          	<% if !(last_huge_product.stock.default_image).nil? %>
		          		<%= link_to page_produit_show_path(last_huge_product.user_id,last_huge_product) do %>
			          		<%= image_tag (last_huge_product.stock.default_image).image_url(:is_huge) if !(last_huge_product.stock.default_image).nil? %>
			          	<% end %>
			        <% end %>
		          </div>
		        </div>
		        <div class="content">
		          <p class="title"><%= link_to last_huge_product.titre, page_produit_show_path(last_huge_product.user_id,last_huge_product), :class => "title" %></p>
		          <p class="description"><%= last_huge_product.description %></p>
		          <span class="price "><%= last_huge_product.prix_unite_ttc %>€ <span class="is_italic">les <%= "#{first_huge_product.quantite} #{first_huge_product.stock.unite_mesure.nom}"  %></span></span>
		        </div>
		      </div>
		    </li>
		    
		    <% produit_last_block.each do |p| %>
				<li>
			      <div class="l_photo_description is_medium is_vertical">
			        <div class="image">
			          <div class="has_corners_shadow is_medium">
			          	<% if !(p.stock.default_image).nil? %>
			          		<%= link_to page_produit_show_path(p.user_id,p) do %>
			          			<%= image_tag (p.stock.default_image).image_url(:is_medium) if !(p.stock.default_image).nil? %>
			          		<% end %>
			          	<% end %>
			          </div>
			        </div>
			        <div class="content">
			          <p class="title"><%= link_to p.titre, page_produit_show_path(p.user_id,p), :class => "title" %></p>
			          <p class="description"><%= p.description %></p>
			          <span class="price "> <%= p.prix_unite_ttc %>€ <span class="is_italic">les <%= "#{last_huge_product.quantite} #{last_huge_product.stock.unite_mesure.nom}"  %></span></span>
			        </div>
			      </div>
			    </li>
			<% end %>
			<br class="clear"/>
		</ul>
	<% end %>

<% end %>