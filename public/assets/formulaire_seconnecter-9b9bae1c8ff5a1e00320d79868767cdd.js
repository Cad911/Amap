(function(){$(document).ready(function(){return window.FormulaireSeConnecter=function(){function e(e,t,n){this.id_form=e,this.id_button_submit=t,this.info_by_lightbox=n!=null?n:!0,this.ajax_formulaire(),this.event_form()}return e.prototype.ajax_formulaire=function(){var e;return e=this,$(this.id_form).bind("ajax:success",function(e,t){lightbox_connexion.link_top(t),lightbox_connexion.hide();if(this.info_by_lightbox)return light_box_information.title_header("Success"),light_box_information.title_content("Connexion reussi"),light_box_information.text_content("Bonjour "+t.user.prenom),light_box_information.show()}),$(this.id_form).bind("ajax:error",function(t,n){return console.log("test-erreur-seconnecter"),message_information.message_error(e.id_form,"Erreur",n.responseText)})},e.prototype.extract_error=function(e,t){var n,r;for(n in e)r=e[n],typeof r=="array"?light_box_form_inscription.extract_error(r,t):t+="<br/><strong> "+n+"</strong> "+r;return t},e.prototype.event_form=function(){var e;return e=this,$(this.id_button_submit).bind("click",function(){return $(e.id_form).submit()}),$(this.id_form+" input#client_email").change(function(){return e.format_email()})},e.prototype.format_email=function(){var e;return e=this,this.erreur=!1,$.ajax({type:"POST",async:!1,url:"/clients/emailExist",data:{email:$(this.id_form+" input#client_email").val()},success:function(t){var n;return n="",t.good_format===!1?n+="ce n'est pas une adresse mail.":t.exist===!1&&(n+="Email n'existe pas dans notre base"),n!==""?(div_state.div_error($(e.id_form+" #client_email"),n),this.erreur=!0,console.log(e.id_form)):div_state.div_success($(e.id_form+" #client_email"),n)}}),this.erreur},e.prototype.show=function(){return $(this.id_form).css("display","block")},e.prototype.hide=function(){return $(this.id_form).css("display","none")},e}()})}).call(this);