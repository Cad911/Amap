// Generated by CoffeeScript 1.2.1-pre
(function(){$(document).ready(function(){var e,t,n,r,i,s,o,u;return e={event:function(){if($(".raw_panier").length>0)return $(".price>div.close_square").bind("click",function(){var e;return e=$(this).parent("div").parent("div").parent("div").attr("id").replace("raw_",""),event_resume_p.delete_quantity(e)}),$(".quantity>span.plus").bind("click",function(){var t,n;return t=parseInt($(this).parent("div").parent("div").parent("div").attr("id").replace("raw_","")),n=e.next_value(),e.change_duree(t,n),e.change_duree_html(n,"plus")}),$(".quantity>span.minus").bind("click",function(){var t,n;return t=parseInt($(this).parent("div").parent("div").parent("div").attr("id").replace("raw_","")),n=e.prev_value(),e.change_duree(t,n),e.change_duree_html(n,"minus")})},next_value:function(){return $("select#panier_duree option:selected").next().val()!==void 0?$("select#panier_duree option:selected").next().attr("selected","selected"):$("select#panier_duree option").first().attr("selected","selected"),$("select#panier_duree option:selected").val()},prev_value:function(){return $("select#panier_duree option:selected").prev().val()!==void 0?$("select#panier_duree option:selected").prev().attr("selected","selected"):$("select#panier_duree option").last().attr("selected","selected"),$("select#panier_duree option:selected").val()},change_duree_html:function(e,t){var n,r;return t==="plus"&&(n="-500px",r="500px"),t==="minus"&&(n="500px",r="-500px"),$(".quantity>.sum").animate({top:n},{duration:500,complete:function(){return $(this).css("top",r),$(this).text(e),$(this).animate({top:"-8px"},500)}})},change_duree:function(e,t){var n;return n={id_abonnement:e,duree:t},$.ajax({type:"POST",url:"/abonnements/changeDuree",format:"json",data:n,success:function(e){return message_information.message_success(".products","Success",e.message,2e3)}})}},e.event(),t={display:function(){return $("#l_se_connecter").fadeIn(1e3)},hide:function(){return $("#l_se_connecter").css("display","none")}},r=new FormulaireSinscrire("#form_sinscrire","#form_sinscrire #b_sign_up",!1),i=new FormulaireSeConnecter("#form_se_connecter","#b_sign_in>a",!1),n={init:function(){},display:function(){return $("#l_sinscrire").fadeIn(1e3)},hide:function(){return $("#l_sinscrire").css("display","none")}},u={init:function(){},event:function(){return $("#b_next_step>a").bind("click",function(){return console.log("test"),$("input[type=radio]:checked").length>0?$("#form_select_pr").submit():alert("Veuillez choisir un point relai")}),$("#form_sinscrire, #form_se_connecter").bind("ajax:success",function(e,t){if($("#l_areyouinscrit").length>0){s.hide(),u.add_submit(),$(this).attr("id")==="form_sinscrire"&&message_information.message_success(".products","Success","Inscription réussi! Vous êtes connecté!");if($(this).attr("id")==="form_se_connecter")return message_information.message_success(".products","Success","Connexion réussi! Vous êtes connecté!")}})},add_submit:function(){if($("#footer_confirmation>span.next_step").length===0)return $("#footer_confirmation").append('<span class="button next_step" id="b_next_step"><a> Procéder paiement</a></span>'),u.event()},remove_submit:function(){return $("#form_select_pr>.actions").html("")}},o={init:function(){return o.radio_box_checked(),o.event()},event:function(){return $("li>.raw").bind("click",function(){return o.is_checked(this)})},is_checked:function(e){var t;t=!1,$(".products>li>.raw").each(function(){if($(this).hasClass("raw_select"))return t=!0,this===e?o.decheck(this):(o.decheck(this),o.check(e),!1)});if(!t)return o.check(e)},check:function(e){var t;return $(e).addClass("raw_select"),t=$(e).attr("id").replace("pr_",""),$('input:radio[name="point_relai[id]"][value="'+t+'"]').attr("checked","checked")},decheck:function(e){return $(e).removeClass("raw_select")},radio_box_checked:function(){var e;if($("input[type=radio]:checked").length>0)return e=$('input:radio[name="point_relai[id]"]:checked').val(),o.check($("#pr_"+e))}},s={init:function(){return s.event_()},event_:function(){return $(".choice").bind("click",function(){return s.is_checked(this)}),$("#b_next_step").bind("click",function(){return $("input[type=radio]:checked").length>0?$(".l_select_pr").submit():alert("Veuillez choisir un point relai")})},is_checked:function(e){var t;t=!1,$(".choice").each(function(){if($(this).hasClass("is_choose"))return t=!0,this===e?s.decheck(this):(s.decheck(this),s.check(e),!1)});if(!t)return s.check(e)},check:function(e){return $(e).addClass("is_choose"),$(e).hasClass("yes")?(n.hide(),t.display()):(t.hide(),n.display())},decheck:function(e){return $(e).removeClass("is_choose"),$(e).hasClass("yes")?t.hide():n.hide()},hide:function(){return $("#l_areyouinscrit").css("display","none")}},o.init(),s.init(),u.event()})}).call(this);