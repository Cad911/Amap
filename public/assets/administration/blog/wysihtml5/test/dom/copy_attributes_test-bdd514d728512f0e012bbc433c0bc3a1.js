module("wysihtml5.dom.copyAttributes",{setup:function(){this.div=document.createElement("div"),this.span=document.createElement("span"),this.anotherDiv=document.createElement("div"),this.iframe=document.createElement("iframe"),this.iframe.src="javascript:'<html></html>'",document.body.appendChild(this.iframe)},teardown:function(){this.iframe.parentNode.removeChild(this.iframe)}}),test("Basic Tests",function(){var e={title:"foobar",lang:"en",className:"foo bar"};wysihtml5.dom.setAttributes(e).on(this.div),wysihtml5.dom.copyAttributes(["title","lang","className"]).from(this.div).to(this.span),equal(this.span.title,e.title,"Title correctly copied"),equal(this.span.lang,e.lang,"Lang correctly copied"),equal(this.span.className,e.className,"Class correctly copied")}),asyncTest("Test copying attributes from one element to another element which is in an iframe",function(){expect(1);var e=this;setTimeout(function(){var t=e.iframe.contentWindow.document,n=t.createElement("div");t.body.appendChild(n),e.span.title="heya!",wysihtml5.dom.copyAttributes(["title"]).from(e.span).to(n),equal(n.title,"heya!","Element in iframe correctly got attributes copied over"),start()},1e3)});