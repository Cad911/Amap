(function(){$(document).ready(function(){var e;e={init:function(){var e;return e=this,e.editorInstance=new wysihtml5.Editor("article_content",{parserRules:wysihtml5ParserRules,stylesheets:"/assets/blog/admin.css"}),this.event(),console.log(e)},event:function(){var e;return e=this,$(".button_insert_image").on("click",function(){return $(".lightbox_insert_image").css("display","block")}),$("li.link").on("click",function(){return $(".lightbox_insert_link").css("display","block")}),$(".button_add_link").on("click",function(){return e.editorInstance.focus(),e.editorInstance.composer.commands.exec("createLink",{href:$(".input_link").val(),target:"_blank",rel:"nofollow"}),$(".lightbox_insert_link").css("display","none")}),$(".input_image").bind("change",function(){var e,t,n;e=this.files[0];if(window.FileReader)return t=new FileReader,n=0,t.onloadend=function(e){return $(".apercu_image").attr("src",e.target.result)},t.readAsDataURL(e)}),$(".button_add_image").on("click",function(){return e.upload_image()}),$("li.bold").on("click",function(){return e.editorInstance.composer.commands.exec("bold")}),$("li.italic").on("click",function(){return e.editorInstance.composer.commands.exec("italic")}),$("li.list_blog").on("click",function(){return e.editorInstance.composer.commands.exec("insertUnorderedList")}),$("li.h1").on("click",function(){return e.editorInstance.composer.commands.exec("formatBlock","h1")}),$("li.h2").on("click",function(){return e.editorInstance.composer.commands.exec("formatBlock","h2")})},upload_image:function(){var e,t,n,r;return n=this,r=new XMLHttpRequest,r.open("POST","/administration/users/"+$(".user_id").val()+"/blog/upload_image"),t=new FormData,e=$(".input_image")[0],t.append("image_blog",e.files[0]),console.log(t),r.send(t),r.onreadystatechange=function(){var e;if(r.readyState===r.DONE)return e=JSON.parse(r.responseText),console.log(n.editorInstance),n.editorInstance.focus(),n.editorInstance.composer.commands.exec("insertImage",{src:e.path,alt:"test",width:100}),$(".lightbox_insert_image").css("display","none")}}};if($("#article_categorie_blog_id").length>0)return e.init()})}).call(this);