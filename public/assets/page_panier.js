(function(){$(document).ready(function(){var e,t;t={init:function(){return console},id_basket:0,id_user:0,event:function(){return t.id_basket=$("#panier_id").val(),t.id_user=$("#panier_revendeur_id").val(),$(".add_basket_link").on("click",function(){return t.sabonner($("#panier_id").val(),$("#panier_duree").val())}),$(".add_basket_link_revendeur").on("click",function(){var e;return e=$(this).attr("id").replace("basket_",""),t.sabonner(e,$(this).parent(".call_to_action").children("p>#panier_duree").val())}),$(".li_basket").on("hover",function(){return $(this).find(".pursache .call_to_action>p").css("display","block")}),$(".li_basket").on("mouseleave",function(){return $(this).find(".pursache .call_to_action>p").css("display","none")}),$("#panier_declinaison_id").on("change",function(){return t.change_price($(this).val())})},change_price:function(e){return $.ajax({type:"GET",url:"/administration/users/"+t.id_user+"/paniers/"+t.id_basket+"/get_declinaison/"+e,format:"json",success:function(e){var t;return t=$(".l_content_right").find(".price.is_bold").children("span"),console.log(t[0]),$(".l_content_right").find(".price.is_bold").html(e.declinaison_panier.prix_panier_ttc+" â‚¬ "+t[0].outerHTML)}})},sabonner:function(e,t){var n;return n={panier:{id:e,duree:t,declinaison_panier_id:$("#panier_declinaison_id").val()}},console.log(n),$.ajax({type:"POST",data:n,url:"/abonnements/sabonner",format:"json",success:function(e){return $(location).attr("href","/process_order/resume")}})}},t.event(),e={init:function(){return this.event()},event:function(){var e;return e=this,$(".filter_zone>ul>li").each(function(){return $(this).on("click",function(){var t,n,r;return $(this).hasClass("is_click")?$(this).removeClass("is_click"):$(this).addClass("is_click"),n=e.get_categorie_clicked(),t=e.get_agriculteur_clicked(),r=e.get_order_by(),e.get_produit_filter(n,t,r)})}),e.function_move_button_active(),$(".filters>ul.dropdown-menu>li").on("click",function(){var t,n,r;return $(".filters>ul>li").removeClass("is_click"),$(this).addClass("is_click"),$(".filter>span").text($(this).children("a").text()),n=e.get_categorie_clicked(),t=e.get_agriculteur_clicked(),r=e.get_order_by(),e.get_produit_filter(n,t,r),console.log($(this).parents("ul").parents(".filters")),$(this).parents("ul").parents(".filters").removeClass("open")})},function_move_button_active:function(){var e;return e=this,$(".switch").on("click",function(t){var n,r,i,s,o,u,a,f;o=$(this).parents(".toggle_switch"),s=$(this).parents(".toggle_switch").children(".toggles").children(".toggle_on_off"),a=$(this).parents(".toggle_switch").children(".toggles"),u=a.innerWidth(),f=$(this).innerWidth(),n=u-f+9,r=-2;if(o.hasClass("is_off"))return $(this).animate({left:r+"px"},{duration:200,queue:!1}),$(s).animate({left:"-35px"},{duration:200,queue:!1}),$(".filter_bg").slideDown(1e3),o.removeClass("is_off"),o.addClass("is_on");if(o.hasClass("is_on"))return $(this).animate({left:n+"px"},{duration:200,queue:!1}),$(s).animate({left:"-2px"},{duration:200,queue:!1}),$(".filter_bg").slideUp(1e3),o.removeClass("is_on"),o.addClass("is_off"),e.reset_categorie(),e.reset_agriculteur(),i=e.get_order_by(),e.get_produit_filter(null,null,i)})},reset_categorie:function(){return $(".filter_zone>ul>li").each(function(){return $(this).removeClass("is_click")}),this.get_categorie_clicked([])},reset_agriculteur:function(){return $(".filter_zone>ul.filter_agriculteur>li").each(function(){return $(this).removeClass("is_click")}),this.get_agriculteur_clicked()},get_categorie_clicked:function(){var e;return e=[],$(".filter_zone>ul.filter_categorie>li").each(function(){if($(this).hasClass("is_click"))return e.push($(this).attr("data-id"))}),e},get_agriculteur_clicked:function(){var e;return e=[],$(".filter_zone>ul.filter_agriculteur>li").each(function(){if($(this).hasClass("is_click"))return e.push($(this).attr("data-id"))}),e},get_order_by:function(){var e;return e=[],$(".filters>ul>li").each(function(){if($(this).hasClass("is_click"))return e=$(this).attr("data-order")}),e},get_produit_filter:function(e,t,n){var r,i,s,o;e==null&&(e=null),t==null&&(t=null),n==null&&(n=null),o=new XMLHttpRequest,o.open("POST","/page_panier/index_by_filter"),o.setRequestHeader("Accept","application/json"),i=new FormData;if(e!==null&&e.length>0)for(r in e)s=e[r],i.append("filter[categorie_id][value][]",s);if(t!==null&&t.length>0)for(r in t)s=t[r],i.append("filter[revendeur_id][value][]",s);return n!==null&&i.append("order_by",n),o.send(i),o.onreadystatechange=function(){var e,t;if(o.readyState===o.DONE)return console.log("test"),console.log(o.responseText),e=$(".l_product_list"),t=$(".basket_list>h1"),t.after(o.responseText),e.remove()}}};if($(".basket_list").length>0)return e.init()})}).call(this);