(function(){$(document).ready(function(){var e,t;return e={init:function(){},event:function(){return $(".filter").bind("click",function(){$(this).hasClass("show_product")&&(e.delete_ul(),e.recup_product(),e.already_filter("show_product")?e.recup_basket():$(".show_basket").hasClass("filter_active")&&$(".show_basket").removeClass("filter_active"));if($(this).hasClass("show_basket"))return e.delete_ul(),e.already_filter("show_basket")?e.recup_product():$(".show_product").hasClass("filter_active")&&$(".show_product").removeClass("filter_active"),e.recup_basket()})},already_filter:function(e){return $("."+e).hasClass("filter_active")?($("."+e).removeClass("filter_active"),!0):($("."+e).addClass("filter_active"),!1)},recup_product:function(){var n;return n={user_id:$("#user_id").val()},$.ajax({type:"POST",data:n,url:"/product_filter",format:"json",success:function(n){var r,i;i=$.parseJSON(n),r=0;while(r<i.length)e.reload_ul(e.create_li("product",i[r])),r++;return t.event("ul.farmers_products>li")}})},recup_basket:function(){var n;return n={user_id:$("#user_id").val()},$.ajax({type:"POST",data:n,url:"/basket_filter",format:"json",success:function(n){var r,i;i=$.parseJSON(n),r=0;while(r<i.length)e.reload_ul(e.create_li("basket",i[r])),r++;return t.event("ul.farmers_products>li")}})},hide_li:function(){},show_li:function(){},delete_ul:function(){return console.log("delete"),$(".farmers_products").html("")},reload_ul:function(e){return $("ul.farmers_products").append(e)},create_li:function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m;return l=$(document.createElement("li")),e==="product"&&l.addClass("li_product"),e==="basket"&&l.addClass("li_basket"),d=$(document.createElement("span")),d.addClass("category "+e),s=$(document.createElement("div")),s.addClass("l_photo_description is_horizontal"),o=$(document.createElement("div")),o.addClass("image"),u=$(document.createElement("div")),u.addClass("has_corners_shadow is_small"),f=$(document.createElement("img")),t.default_image!==void 0&&f.attr("src",t.default_image.image.is_small.url),o.append(u.append(f)),i=$(document.createElement("div")),i.addClass("content"),h=$(document.createElement("p")),h.addClass("title"),h.text(t.titre),c=$(document.createElement("p")),c.addClass("description"),c.text(t.description),i.append(h),i.append(c),a=$(document.createElement("div")),a.addClass("purchase"),m=$(document.createElement("span")),m.addClass("price"),v=$(document.createElement("span")),v.addClass("note is_italic"),e==="product"&&(m.text(""+t.prix_unite_ttc+" €"),v.text(" les "+t.quantite+" "+t.unite_mesure)),e==="basket"&&(m.text(""+t.min_price+" €"),v.text(" dès "+t.min_personne)),r=$(document.createElement("div")),r.addClass("call_to_action"),p=$(document.createElement("span")),p.addClass("button add_"+e+"_link"),p.attr("id",e+"_"+t.id),n=$(document.createElement("a")),n.text("voir  le  produit"),r.append(p.append(n)),a.append(m),a.append(v),a.append(r),s.append(o),s.append(i),s.append(a),l.append(d),l.append(s),l}},t={event:function(e){return $(e).find("*").each(function(){return $(this).on("click",function(e){var t,n,r;console.log(this),$(this).hasClass("pursache")&&e.stopImmediatePropagation();if($(this).hasClass("pursache")||$(this).parents(".pursache").length>0)return!0;$(this).parents(".li_product").length>0&&(n=$(this).parents(".li_product").find(".add_product_link").attr("id").replace("product_",""),r=$("#user_id").val(),$(location).attr("href","/page_produit/show/"+r+"/"+n),console.log("/page_produit/show/"+r+"/"+n));if($(this).parents(".li_basket").length>0)return t=$(this).parents(".li_basket").find(".add_basket_link").attr("id").replace("basket_",""),r=$("#user_id").val(),console.log("/page_panier/show/"+r+"/"+t),$(location).attr("href","/page_panier/show/"+r+"/"+t)})})},test:function(){}},e.event(),t.event("ul.farmers_products>li")})}).call(this);